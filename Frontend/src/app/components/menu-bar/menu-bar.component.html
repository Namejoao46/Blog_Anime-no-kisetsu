<header class="menu-header">
  <div class="logo">
    <a routerLink="/home">
      <img src="https://i.postimg.cc/zG2kx5P4/Captura-de-tela-2025-11-23-204517.png" alt="Anime no Kisetsu">
    </a>
  </div>

  <!-- Categorias principais sempre visíveis -->
  <nav class="menu-bar-itens">
    <a routerLink="/categoria/manhwa" routerLinkActive="ativo" [routerLinkActiveOptions]="{ exact: true }">MANHWA</a>
    <a routerLink="/categoria/anime" routerLinkActive="ativo" [routerLinkActiveOptions]="{ exact: true }">ANIME</a>
    <a routerLink="/categoria/manga" routerLinkActive="ativo" [routerLinkActiveOptions]="{ exact: true }">MANGA</a>
    <a routerLink="/categoria/gamer" routerLinkActive="ativo" [routerLinkActiveOptions]="{ exact: true }">GAMER</a>
  </nav>

  <!-- Ícones sociais -->
  <div class="Icones">
    <ul>
      | <li><a href="https://bing.com/search?q=GitHub+profile+namejoao46" target="_blank"><img src="https://img.icons8.com/?size=100&id=12599&format=png&color=FFFFFF" alt="GitHub"></a></li> | 
      <li><a href="https://www.linkedin.com/in/joaopauloavs" target="_blank"><img src="https://img.icons8.com/?size=100&id=8808&format=png&color=FFFFFF" alt="Linkedin"></a></li> | 
      <li><a href="mailto:paulo.joao.avs@gmail.com"><img src="https://img.icons8.com/?size=100&id=38158&format=png&color=FFFFFF" alt="Gmail"></a></li> | 
    </ul>
  </div>

  <!-- Backdrop e botão do menu lateral -->
  <div *ngIf="menuAberto" class="backdrop" (click)="fecharMenu()"></div>
  <div class="botao_menu" (click)="alternarMenu()" [class.menuAberto]="menuAberto">
    <span class="seta seta1"></span>
    <span class="seta seta2"></span>
    <span class="seta seta3"></span>
  </div>

  <!-- Menu lateral: aparece só quando menuAberto = true -->
  <div class="menu_lateral" [class.aberto]="menuAberto">
    <div class="menu-lateral-conteudo">

      <div class="container-perfil">
        <!-- Login / Perfil -->
        <ng-container *ngIf="usuarioLogado; else loginLink">
          <h2>{{ usuarioLogado.username }}</h2>
          <a (click)="sair()">Sair</a>
          <!-- Criar Notícia só aparece se logado -->
          <a routerLink="/criar-noticia">Criar Notícia</a>
          <a routerLink="/gerenciar-noticias">Gerenciar Notícias</a>
        </ng-container>
      </div>

      <ng-template #loginLink>
        <a routerLink="/login">Login</a>
      </ng-template>

      <br>

      <div class="container-categoria">
        <h2>Categorias</h2>
          <!-- Categorias principais (fixas) -->
          <a routerLink="/categoria/manhwa" routerLinkActive="ativo" [routerLinkActiveOptions]="{ exact: true }">Manhwa</a>
          <a routerLink="/categoria/anime" routerLinkActive="ativo" [routerLinkActiveOptions]="{ exact: true }">Anime</a>
          <a routerLink="/categoria/manga" routerLinkActive="ativo" [routerLinkActiveOptions]="{ exact: true }">Manga</a>
          <a routerLink="/categoria/gamer" routerLinkActive="ativo" [routerLinkActiveOptions]="{ exact: true }">Gamer</a>
      </div>

      <br>
      <div class="container-subcategoria">
        <h2>Subcategorias</h2>
        <!-- Top 4 subcategorias -->
        <ng-container *ngFor="let sub of topSubcategorias">
          <a [routerLink]="['/categoria', sub.categoria, sub.nome]">{{ sub.nome }}</a>
        </ng-container>

        <!-- Mais... -->
        <div class="mais-subcategorias">
          <span (click)="toggleMais()">Mais...</span>
        </div>
      </div>
      <!-- Caixa flutuante fora do menu -->
      <div class="caixa-flutuante" *ngIf="mostrarMais" (click)="$event.stopPropagation()">
        <div class="scroll-vertical">
          <a *ngFor="let sub of outrasSubcategorias" [routerLink]="['/categoria', sub.categoria, sub.nome]">
            {{ sub.nome }}
          </a>
        </div>
      </div>
    </div>
  </div>
</header>
